var create=function(){$(".btn-create").click(function(){$("#create-form").slideDown("fast");if($(this).hasClass("create-submit")){var name=$("#create-name").val();var value=$("#create-value").val();ajax_create(name,value)}else{$(".btn-create").addClass("create-submit")}});$("#close-create").click(function(){$("#create-form").slideUp("fast");$(".btn-create").removeClass("create-submit")})};var sort=function(){$("#counter-space").sortable({containment:"parent",distance:25,cursor:"move",update:function(e,ui){ajax_reorder(ui.item.find("input").attr("id"),ui.item.index())}})};var resize=function(){var maxW=$("#counter-space").width()-20;var minW=350;var minH=250;var mobile=false;if($(window).width()<768){mobile=true}$(".counter").resizable({maxWidth:maxW,minHeight:minH,minWidth:minW,disabled:mobile,resize:function(e,ui){fontsize(this);namewidth(this)},stop:function(e,ui){var height=Math.max(ui.size.height,minH);var width=Math.max(ui.size.width,minW);ajax_resize($(this).find("input").attr("id"),height,width)}})};var ajax_create=function(name,value){name=name.trim();if(name_check(name)){$.ajax({url:"create/"+name+"/"+value,error:function(){console.log("something broke")}}).done(function(data){location.reload()})}};var ajax_resize=function(counter_id,height,width){$.ajax({url:"resize/"+counter_id+"/"+height+"/"+width,error:function(){console.log("something broke")}})};var ajax_reorder=function(counter_id,new_pos){$.ajax({url:"reorder/"+counter_id+"/"+new_pos,error:function(){console.log("something broke")}})};var main=function(){create();sort();resize()};$(document).ready(main);